!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.gm=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./src/comm"),e=a("./src/communication");b.exports={comm:d,communication:e}},{"./src/comm":8,"./src/communication":9}],2:[function(a,b,c){},{}],3:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],4:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:5}],5:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(a,b,c){(function(b){(function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=function(a,b){function c(){this.constructor=a}for(var d in b)r.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},r={}.hasOwnProperty;p=a("path"),o=a("fs"),n=a("events"),e="---.EMPTY_STRING.---",j=function(a){var b,c,d,e,f;for(e=o.readdirSync(a),f=[],b=0,c=e.length;c>b;b++)d=e[b],f.push(l(p.join(a,d)));return f},l=function(a){return o.statSync(a).isDirectory()?(j(a),o.rmdirSync(a)):o.unlinkSync(a)},k=function(a){var b;return b=""===a?e:a.toString()},h=function(a){function b(a){this.message=null!=a?a:"Unknown error.",null!=Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}return q(b,a),b.prototype.toString=function(){return this.name+": "+this.message},b}(Error),i=function(){function a(a,b,c,d,e){this.key=a,this.oldValue=b,this.newValue=c,this.url=d,this.storageArea=null!=e?e:"localStorage"}return a}(),g=function(){function a(b,c){return this.key=b,this.index=c,this instanceof a?void 0:new a(this.key,this.index)}return a}(),m=function(){var a;return a=function(){},a.prototype=Object.create(null),new a},f=function(a){function c(a,e){var f;return this._location=a,this.quota=null!=e?e:5242880,this instanceof c?(this._location=p.resolve(this._location),null!=d[this._location]?d[this._location]:(this.length=0,this._bytesInUse=0,this._keys=[],this._metaKeyMap=m(),this._eventUrl="pid:"+b.pid,this._init(),this._QUOTA_EXCEEDED_ERR=h,"undefined"!=typeof Proxy&&null!==Proxy?(f={set:function(a){return function(b,c,d){return null!=a[c]?a[c]=d:a.setItem(c,d)}}(this),get:function(a){return function(b,c){return null!=a[c]?a[c]:a.getItem(c)}}(this)},d[this._location]=Proxy.create(f,this),d[this._location]):(d[this._location]=this,d[this._location]))):new c(this._location,this.quota)}var d;return q(c,a),d={},c.prototype._init=function(){var a,b,c,d,e,f,h,i;try{if(i=o.statSync(this._location),null!=i&&!i.isDirectory())throw new Error("A file exists at the location '"+this._location+"' when trying to create/open localStorage");for(this._bytesInUse=0,this.length=0,c=o.readdirSync(this._location),e=d=0,h=c.length;h>d;e=++d)f=c[e],b=decodeURIComponent(f),this._keys.push(b),a=new g(f,e),this._metaKeyMap[b]=a,i=this._getStat(f),null!=(null!=i?i.size:void 0)&&(a.size=i.size,this._bytesInUse+=i.size);this.length=c.length}catch(j){o.mkdirSync(this._location)}},c.prototype.setItem=function(a,b){var c,d,e,f,j,l,m,q,r,s;if(j=n.EventEmitter.listenerCount(this,"storage"),q=null,j&&(q=this.getItem(a)),a=k(a),c=encodeURIComponent(a),f=p.join(this._location,c),r=b.toString(),s=r.length,l=this._metaKeyMap[a],e=!!l,m=e?l.size:0,this._bytesInUse-m+s>this.quota)throw new h;return o.writeFileSync(f,r,"utf8"),e||(l=new g(c,this._keys.push(a)-1),l.size=s,this._metaKeyMap[a]=l,this.length+=1,this._bytesInUse+=s),j?(d=new i(a,q,b,this._eventUrl),this.emit("storage",d)):void 0},c.prototype.getItem=function(a){var b,c;return a=k(a),c=this._metaKeyMap[a],c?(b=p.join(this._location,c.key),o.readFileSync(b,"utf8")):null},c.prototype._getStat=function(a){var b;a=k(a),b=p.join(this._location,encodeURIComponent(a));try{return o.statSync(b)}catch(c){return null}},c.prototype.removeItem=function(a){var b,c,d,e,f,g,h,j,m;if(a=k(a),g=this._metaKeyMap[a]){d=n.EventEmitter.listenerCount(this,"storage"),h=null,d&&(h=this.getItem(a)),delete this._metaKeyMap[a],this.length-=1,this._bytesInUse-=g.size,c=p.join(this._location,g.key),this._keys.splice(g.index,1),j=this._metaKeyMap;for(e in j)m=j[e],f=this._metaKeyMap[e],f.index>g.index&&(f.index-=1);if(l(c),d)return b=new i(a,h,null,this._eventUrl),this.emit("storage",b)}},c.prototype.key=function(a){return this._keys[a]},c.prototype.clear=function(){var a;return j(this._location),this._metaKeyMap=m(),this._keys=[],this.length=0,this._bytesInUse=0,n.EventEmitter.listenerCount(this,"storage")?(a=new i(null,null,null,this._eventUrl),this.emit("storage",a)):void 0},c.prototype._getBytesInUse=function(){return this._bytesInUse},c.prototype._deleteLocation=function(){return delete d[this._location],l(this._location),this._metaKeyMap={},this._keys=[],this.length=0,this._bytesInUse=0},c}(n.EventEmitter),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return q(b,a),b.prototype.setItem=function(a,c){var d;return d=JSON.stringify(c),b.__super__.setItem.call(this,a,d)},b.prototype.getItem=function(a){return JSON.parse(b.__super__.getItem.call(this,a))},b}(f),c.LocalStorage=f,c.JSONStorage=d,c.QUOTA_EXCEEDED_ERR=h}).call(this)}).call(this,a("_process"))},{_process:5,events:3,fs:2,path:4}],7:[function(a,b,c){!function(){function a(){return"x"+ ++H+ +new Date}function e(){return+new Date}function f(a,b){var c=a.join(Q),d=[];return b?(o(b,function(a,b){var c="object"==typeof b?JSON.stringify(b):b;"undefined"!=typeof b&&null!=b&&r(c).length>0&&d.push(a+"="+r(c))}),c+="?"+d.join(R)):c}function g(a,b){var c,d=0,f=function(){d+b>e()?(clearTimeout(c),c=setTimeout(f,b)):(d=e(),a())};return f}function h(a,b){var c=[];return o(a||[],function(a){b(a)&&c.push(a)}),c}function i(a,b){return a.replace(V,function(a,c){return b[c]||a})}function j(a,b){return setTimeout(a,b)}function l(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});return a&&a(b),b}function m(a){return!!a&&"string"!=typeof a&&(Array.isArray&&Array.isArray(a)||"number"==typeof a.length)}function o(a,b){if(a&&b)if(m(a))for(var c=0,d=a.length;d>c;)b.call(a[c],a[c],c++);else for(var c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function p(a,b){var c=[];return o(a||[],function(a,d){c.push(b(a,d))}),c}function q(a){return encodeURIComponent(a).replace(/[!'()*~]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function r(a){return encodeURIComponent(a)}function s(a,b){var c=[];return o(a,function(a,d){b?a.search("-pnpres")<0&&d.subscribed&&c.push(a):d.subscribed&&c.push(a)}),c.sort()}function t(a,b){var c=[];return o(a,function(a,d){b?a.search("-pnpres")<0&&d.subscribed&&c.push(a):d.subscribed&&c.push(a)}),c.sort()}function u(){j(function(){I||(I=1,o(J,function(a){a()}))},P)}function v(b){function c(a){return a||(a={}),o(Ga,function(b,c){b in a||(a[b]=c)}),a}function d(a){var b=[];return o(a,function(a,c){b.push(a)}),b}function v(a){return d(a).sort()}function w(a){var b="",c=v(a);for(var d in c){var e=c[d];b+=e+"="+q(a[e]),d!=c.length-1&&(b+="&")}return b}function x(a,b,c){var d=!1;if("undefined"==typeof a)return b;if("number"==typeof a)d=a>S||0==a?!1:!0;else{if("boolean"==typeof a)return a?T:0;d=!0}return d?(c&&c("Presence Heartbeat value invalid. Valid range ( x > "+S+" or x = 0). Current Value : "+(b||S)),b||S):a}function y(a,b){return Sa.encrypt(a,b||La)||a}function z(a,b){return Sa.decrypt(a,b||La)||Sa.decrypt(a,La)||a}function A(){return clearTimeout(za),!Ba||Ba>=500||1>Ba||!s(wa,!0).length&&!t(xa,!0).length?void(Ca=!1):(Ca=!0,void Ta.presence_heartbeat({callback:function(a){za=j(A,Ba*P)},error:function(a){Ha&&Ha("Presence Heartbeat unable to reach Pubnub servers."+JSON.stringify(a)),za=j(A,Ba*P)}}))}function B(){!Ca&&A()}function C(a){if(Da){if(!na.length)return}else{if(a&&(na.sending=0),na.sending||!na.length)return;na.sending=1}Fa(na.shift())}function D(a){var b=0;return o(t(xa),function(c){var d=xa[c];d&&(b++,(a||function(){})(d))}),b}function E(a){var b=0;return o(s(wa),function(c){var d=wa[c];d&&(b++,(a||function(){})(d))}),b}function F(a,b,c){if("object"==typeof a){if(a.error){var d={};return a.message&&(d.message=a.message),a.payload&&(d.payload=a.payload),void(c&&c(d))}if(a.payload)return void(a.next_page?b&&b(a.payload,a.next_page):b&&b(a.payload))}b&&b(a)}function G(a,b){if("object"==typeof a&&a.error){var c={};return a.message&&(c.message=a.message),a.payload&&(c.payload=a.payload),void(b&&b(c))}b&&b(a)}function H(a,b,d,e){var b=a.callback||b,f=a.error||Ha,g=Ja();e=e||{},e.auth||(e.auth=a.auth_key||fa);var h=[ka,"v1","channel-registration","sub-key",ea];h.push.apply(h,d),g&&(e.callback=g),Fa({callback:g,data:c(e),success:function(a){F(a,b,f)},fail:function(a){G(a,f)},url:h})}function M(){Ia()||R(1,{error:"Offline. Please check your network settings. "}),Y&&clearTimeout(Y),Y=j(M,P)}function Q(){ba&&Ta.time(function(a){X(function(){},a),a||R(1,{error:"Heartbeat failed to connect to Pubnub Servers.Please check your network settings."}),Z&&clearTimeout(Z),Z=j(Q,aa)})}function R(a,b){sa&&sa(a,b),sa=null,clearTimeout(Y),clearTimeout(Z)}function V(a){var b=e()-pa;return b-a/1e4}function X(a,b){function c(b){if(b){var c=b/1e4,f=(e()-d)/2;pa=e()-(c+f),a&&a(pa)}}var d=e();b&&c(b)||Ta.time(c)}var Y,Z,$=+b.windowing||L,_=(+b.timeout||N)*P,aa=(+b.keepalive||O)*P,ba=b.timecheck||0,ca=b.noleave||0,da=b.publish_key,ea=b.subscribe_key,fa=b.auth_key||"",ga=b.secret_key||"",ha=b.hmac_SHA256,ia=b.ssl?"s":"",ja="http"+ia+"://"+(b.origin||"pubsub.pubnub.com"),ka=W(ja),la=W(ja),ma=function(){},na=[],oa=!0,pa=0,qa=0,ra=0,sa=0,ta=b.restore||0,ua=0,va=!1,wa={},xa={},ya={},za=null,Aa=x(b.heartbeat||b.pnexpires||0,b.error),Ba=b.heartbeat_interval||Aa/2-1,Ca=!1,Da=b.no_wait_for_pending,Ea=b["compatible_3.5"]||!1,Fa=b.xdr,Ga=b.params||{},Ha=b.error||function(){},Ia=b._is_online||function(){return 1},Ja=b.jsonp_cb||function(){return 0},Ka=b.db||{get:function(){},set:function(){}},La=b.cipher_key,Ma=b.uuid||!b.unique_uuid&&Ka&&Ka.get(ea+"uuid")||"",Na=b.instance_id||!1,Oa="",Pa=b.shutdown,Qa="undefined"!=typeof b.use_send_beacon?b.use_send_beacon:!0,Ra=Qa?b.sendBeacon:null;2===Aa&&(Ba=1);var Sa=b.crypto_obj||{encrypt:function(a,b){return a},decrypt:function(a,b){return a}},Ta={LEAVE:function(a,b,d,e,g){var h,i,j={uuid:Ma,auth:d||fa},k=W(ja),e=e||function(){},l=g||function(){},m=Ja();if(a.indexOf(K)>0)return!0;if(Ea){if(!ia)return!1;if("0"==m)return!1}return ca?!1:("0"!=m&&(j.callback=m),Na&&(j.instanceid=Oa),h=[k,"v2","presence","sub_key",ea,"channel",r(a),"leave"],i=c(j),Ra&&(url_string=f(h,i),Ra(url_string))?(e&&e({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Fa({blocking:b||ia,callback:m,data:i,success:function(a){F(a,e,l)},fail:function(a){G(a,l)},url:h}),!0))},LEAVE_GROUP:function(a,b,d,e,g){var h,i,j={uuid:Ma,auth:d||fa},k=W(ja),e=e||function(){},l=g||function(){},m=Ja();if(a.indexOf(K)>0)return!0;if(Ea){if(!ia)return!1;if("0"==m)return!1}return ca?!1:("0"!=m&&(j.callback=m),a&&a.length>0&&(j["channel-group"]=a),Na&&(j.instanceid=Oa),h=[k,"v2","presence","sub_key",ea,"channel",r(","),"leave"],i=c(j),Ra&&(url_string=f(h,i),Ra(url_string))?(e&&e({status:200,action:"leave",message:"OK",service:"Presence"}),!0):(Fa({blocking:b||ia,callback:m,data:i,success:function(a){F(a,e,l)},fail:function(a){G(a,l)},url:h}),!0))},set_resumed:function(a){va=a},get_cipher_key:function(){return La},set_cipher_key:function(a){La=a},raw_encrypt:function(a,b){return y(a,b)},raw_decrypt:function(a,b){return z(a,b)},get_heartbeat:function(){return Aa},set_heartbeat:function(a,b){Aa=x(a,Aa,Ha),Ba=b||Aa/2-1,2==Aa&&(Ba=1),ma(),A()},get_heartbeat_interval:function(){return Ba},set_heartbeat_interval:function(a){Ba=a,A()},get_version:function(){return U},getGcmMessageObject:function(a){return{data:a}},getApnsMessageObject:function(a){var b={aps:{badge:1,alert:""}};for(k in a)k[b]=a[k];return b},newPnMessage:function(){var a={};gcm&&(a.pn_gcm=gcm),apns&&(a.pn_apns=apns);for(k in n)a[k]=n[k];return a},_add_param:function(a,b){Ga[a]=b},channel_group:function(a,b){var c,d,e=a.channel_group,b=b||a.callback,f=a.channels||a.channel,g=a.cloak,h=[],i={},j=a.mode||"add";if(e){var k=e.split(":");k.length>1?(c="*"===k[0]?null:k[0],d=k[1]):d=k[0]}c&&h.push("namespace")&&h.push(r(c)),h.push("channel-group"),d&&"*"!==d&&h.push(d),f?(m(f)&&(f=f.join(",")),i[j]=f,i.cloak=oa?"true":"false"):"remove"===j&&h.push("remove"),"undefined"!=typeof g&&(i.cloak=g?"true":"false"),H(a,b,h,i)},channel_group_list_groups:function(a,b){var c;c=a.namespace||a.ns||a.channel_group||null,c&&(a.channel_group=c+":*"),Ta.channel_group(a,b)},channel_group_list_channels:function(a,b){return a.channel_group?void Ta.channel_group(a,b):Ha("Missing Channel Group")},channel_group_remove_channel:function(a,b){return a.channel_group?a.channel||a.channels?(a.mode="remove",void Ta.channel_group(a,b)):Ha("Missing Channel"):Ha("Missing Channel Group")},channel_group_remove_group:function(a,b){return a.channel_group?a.channel?Ha("Use channel_group_remove_channel if you want to remove a channel from a group."):(a.mode="remove",void Ta.channel_group(a,b)):Ha("Missing Channel Group")},channel_group_add_channel:function(a,b){return a.channel_group?a.channel||a.channels?void Ta.channel_group(a,b):Ha("Missing Channel"):Ha("Missing Channel Group")},channel_group_cloak:function(a,b){return"undefined"==typeof a.cloak?void b(oa):(oa=a.cloak,void Ta.channel_group(a,b))},channel_group_list_namespaces:function(a,b){var c=["namespace"];H(a,b,c)},channel_group_remove_namespace:function(a,b){var c=["namespace",a.namespace,"remove"];H(a,b,c)},history:function(a,b){var b=a.callback||b,d=a.count||a.limit||100,e=a.reverse||"false",f=a.error||function(){},g=a.auth_key||fa,h=a.cipher_key,i=a.channel,j=a.channel_group,k=a.start,l=a.end,m=a.include_token,n=a.string_message_token||!1,o={},p=Ja();return i||j?b?ea?(o.stringtoken="true",o.count=d,o.reverse=e,o.auth=g,j&&(o["channel-group"]=j,i||(i=",")),p&&(o.callback=p),k&&(o.start=k),l&&(o.end=l),m&&(o.include_token="true"),n&&(o.string_message_token="true"),void Fa({callback:p,data:c(o),success:function(a){if("object"==typeof a&&a.error)return void f({message:a.message,payload:a.payload});for(var c=a[0],d=[],e=0;e<c.length;e++)if(m){var g=z(c[e].message,h),i=c[e].timetoken;try{d.push({message:JSON.parse(g),timetoken:i})}catch(j){d.push({message:g,timetoken:i})}}else{var g=z(c[e],h);try{d.push(JSON.parse(g))}catch(j){d.push(g)}}b([d,a[1],a[2]])},fail:function(a){G(a,f)},url:[ka,"v2","history","sub-key",ea,"channel",r(i)]})):Ha("Missing Subscribe Key"):Ha("Missing Callback"):Ha("Missing Channel")},replay:function(a,b){var d,b=b||a.callback||function(){},e=a.auth_key||fa,f=a.source,g=a.destination,h=a.stop,i=a.start,j=a.end,k=a.reverse,l=a.limit,m=Ja(),n={};return f?g?da?ea?("0"!=m&&(n.callback=m),h&&(n.stop="all"),k&&(n.reverse="true"),i&&(n.start=i),j&&(n.end=j),l&&(n.count=l),n.auth=e,d=[ka,"v1","replay",da,ea,f,g],void Fa({callback:m,success:function(a){F(a,b,err)},fail:function(){b([0,"Disconnected"])},url:d,data:c(n)})):Ha("Missing Subscribe Key"):Ha("Missing Publish Key"):Ha("Missing Destination Channel"):Ha("Missing Source Channel")},auth:function(a){fa=a,ma()},time:function(a){var b=Ja(),d={uuid:Ma,auth:fa};Na&&(d.instanceid=Oa),Fa({callback:b,data:c(d),url:[ka,"time",b],success:function(b){a(b[0])},fail:function(){a(0)}})},publish:function(a,b){var d=a.message;if(!d)return Ha("Missing Message");var e,f,b=b||a.callback||d.callback||a.success||function(){},g=a.channel||d.channel,h=a.auth_key||fa,i=a.cipher_key,j=a.error||d.error||function(){},k=a.post||!1,l="store_in_history"in a?a.store_in_history:!0,m=Ja(),n="push";return a.prepend&&(n="unshift"),g?da?ea?(d.getPubnubMessage&&(d=d.getPubnubMessage()),d=JSON.stringify(y(d,i)),f=[ka,"publish",da,ea,0,r(g),m,r(d)],e={uuid:Ma,auth:h},l||(e.store="0"),Na&&(e.instanceid=Oa),na[n]({callback:m,url:f,data:c(e),fail:function(a){G(a,j),C(1)},success:function(a){F(a,b,j),C(1)},mode:k?"POST":"GET"}),void C()):Ha("Missing Subscribe Key"):Ha("Missing Publish Key"):Ha("Missing Channel")},unsubscribe:function(a,b){var c=a.channel,d=a.channel_group,e=a.auth_key||fa,b=b||a.callback||function(){},f=a.error||function(){};if(ua=0,ta=1,!c&&!d)return Ha("Missing Channel or Channel Group");if(!ea)return Ha("Missing Subscribe Key");if(c){var g=m(c)?c:(""+c).split(","),h=[],i=[];if(o(g,function(a){wa[a]&&h.push(a)}),0==h.length)return void b({action:"leave"});o(h,function(a){i.push(a+K)}),o(h.concat(i),function(a){a in wa&&(wa[a]=0),a in ya&&delete ya[a]});var j=!0;I&&(j=Ta.LEAVE(h.join(","),0,e,b,f)),j||b({action:"leave"})}if(d){var k=m(d)?d:(""+d).split(","),l=[],n=[];if(o(k,function(a){xa[a]&&l.push(a)}),0==l.length)return void b({action:"leave"});o(l,function(a){n.push(a+K)}),o(l.concat(n),function(a){a in xa&&(xa[a]=0),a in ya&&delete ya[a]});var j=!0;I&&(j=Ta.LEAVE_GROUP(l.join(","),0,e,b,f)),j||b({action:"leave"})}ma()},subscribe:function(a,b){function d(a){a?j(ma,y):(ka=W(ja,1),la=W(ja,1),j(function(){Ta.time(d)},P)),E(function(b){return a&&b.disconnected?(b.disconnected=0,b.reconnect(b.name)):void(a||b.disconnected||(b.disconnected=1,b.disconnect(b.name)))}),D(function(b){return a&&b.disconnected?(b.disconnected=0,b.reconnect(b.name)):void(a||b.disconnected||(b.disconnected=1,b.disconnect(b.name)))})}function f(){var a=Ja(),b=s(wa).join(","),e=t(xa).join(",");if(b||e){b||(b=","),R();var g=c({uuid:Ma,auth:fa});e&&(g["channel-group"]=e);var h=JSON.stringify(ya);h.length>2&&(g.state=JSON.stringify(ya)),Aa&&(g.heartbeat=Aa),Na&&(g.instanceid=Oa),B(),sa=Fa({timeout:x,callback:a,fail:function(a){a&&a.error&&a.service?(G(a,m),d(1)):Ta.time(function(b){!b&&G(a,m),d(b)})},data:c(g),url:[la,"subscribe",ea,r(b),a,ua],success:function(a){if(!a||"object"==typeof a&&"error"in a&&a.error)return m(a.error),j(ma,P);if(n(a[1]),ua=!ua&&ta&&Ka.get(ea)||a[1],E(function(a){a.connected||(a.connected=1,a.connect(a.name))}),D(function(a){a.connected||(a.connected=1,a.connect(a.name))}),va&&!ta)return ua=0,va=!1,Ka.set(ea,0),void j(f,y);v&&(ua=1e4,v=0),Ka.set(ea,a[1]);var b=function(){var b="",c="";a.length>3?(b=a[3],c=a[2]):b=a.length>2?a[2]:p(s(wa),function(b){return p(Array(a[0].length).join(",").split(","),function(){return b})}).join(",");var d=b.split(","),e=c?c.split(","):[];return function(){var a=d.shift()||ra,b=e.shift(),c={};b?(a&&a.indexOf("-pnpres")>=0&&b.indexOf("-pnpres")<0&&(b+="-pnpres"),c=xa[b]||wa[b]||{callback:function(){}}):c=wa[a];var f=[c.callback||qa,a.split(K)[0]];return b&&f.push(b.split(K)[0]),f}}(),c=V(+a[1]);o(a[0],function(d){var e=b(),f=z(d,wa[e[1]]?wa[e[1]].cipher_key:null);e[0]&&e[0](f,a,e[2]||e[1],c,e[1])}),j(f,y)}})}}var g=a.channel,h=a.channel_group,b=b||a.callback,b=b||a.message,i=a.connect||function(){},k=a.reconnect||function(){},l=a.disconnect||function(){},m=a.error||m||function(){},n=a.idle||function(){},q=a.presence||0,u=a.noheresync||0,v=a.backfill||0,w=a.timetoken||0,x=a.timeout||_,y=a.windowing||$,A=a.state,C=a.heartbeat||a.pnexpires,F=a.heartbeat_interval,H=a.restore||ta;return fa=a.auth_key||fa,ta=H,ua=w,g||h?b?ea?((C||0===C||F||0===F)&&Ta.set_heartbeat(C,F),g&&o((g.join?g.join(","):""+g).split(","),function(d){var f=wa[d]||{};wa[ra=d]={name:d,connected:f.connected,disconnected:f.disconnected,subscribed:1,callback:qa=b,cipher_key:a.cipher_key,connect:i,disconnect:l,reconnect:k},A&&(d in A?ya[d]=A[d]:ya[d]=A),q&&(Ta.subscribe({channel:d+K,callback:q,restore:H}),f.subscribed||u||Ta.here_now({channel:d,data:c({uuid:Ma,auth:fa}),callback:function(a){o("uuids"in a?a.uuids:[],function(b){q({action:"join",uuid:b,timestamp:Math.floor(e()/1e3),occupancy:a.occupancy||1},a,d)})}}))}),h&&o((h.join?h.join(","):""+h).split(","),function(d){var f=xa[d]||{};xa[d]={name:d,connected:f.connected,disconnected:f.disconnected,subscribed:1,callback:qa=b,cipher_key:a.cipher_key,connect:i,disconnect:l,reconnect:k},q&&(Ta.subscribe({channel_group:d+K,callback:q,restore:H,auth_key:fa}),f.subscribed||u||Ta.here_now({channel_group:d,data:c({uuid:Ma,auth:fa}),callback:function(a){o("uuids"in a?a.uuids:[],function(b){q({action:"join",uuid:b,timestamp:Math.floor(e()/1e3),occupancy:a.occupancy||1},a,d)})}}))}),ma=function(){R(),j(f,y)},I?void ma():J.push(ma)):Ha("Missing Subscribe Key"):Ha("Missing Callback"):Ha("Missing Channel")},here_now:function(a,b){var b=a.callback||b,d=a.debug,e=a.error||function(){},f=a.auth_key||fa,g=a.channel,h=a.channel_group,i=Ja(),j="uuids"in a?a.uuids:!0,k=a.state,l={uuid:Ma,auth:f};if(j||(l.disable_uuids=1),k&&(l.state=1),!b)return Ha("Missing Callback");if(!ea)return Ha("Missing Subscribe Key");var m=[ka,"v2","presence","sub_key",ea];g&&m.push("channel")&&m.push(r(g)),"0"!=i&&(l.callback=i),h&&(l["channel-group"]=h,!g&&m.push("channel")&&m.push(",")),Na&&(l.instanceid=Oa),Fa({callback:i,data:c(l),success:function(a){F(a,b,e)},fail:function(a){G(a,e)},debug:d,url:m})},where_now:function(a,b){var b=a.callback||b,d=a.error||function(){},e=a.auth_key||fa,f=Ja(),g=a.uuid||Ma,h={auth:e};return b?ea?("0"!=f&&(h.callback=f),Na&&(h.instanceid=Oa),void Fa({callback:f,data:c(h),success:function(a){F(a,b,d)},fail:function(a){G(a,d)},url:[ka,"v2","presence","sub_key",ea,"uuid",r(g)]})):Ha("Missing Subscribe Key"):Ha("Missing Callback")},state:function(a,b){var d,b=a.callback||b||function(a){},e=a.error||function(){},f=a.auth_key||fa,g=Ja(),h=a.state,i=a.uuid||Ma,j=a.channel,k=a.channel_group,l=c({auth:f});return ea?i?j||k?("0"!=g&&(l.callback=g),"undefined"!=typeof j&&wa[j]&&wa[j].subscribed&&h&&(ya[j]=h),"undefined"!=typeof k&&xa[k]&&xa[k].subscribed&&(h&&(ya[k]=h),l["channel-group"]=k,j||(j=",")),l.state=JSON.stringify(h),Na&&(l.instanceid=Oa),d=h?[ka,"v2","presence","sub-key",ea,"channel",j,"uuid",i,"data"]:[ka,"v2","presence","sub-key",ea,"channel",j,"uuid",r(i)],void Fa({callback:g,data:c(l),success:function(a){F(a,b,e)},fail:function(a){G(a,e)},url:d})):Ha("Missing Channel"):Ha("Missing UUID"):Ha("Missing Subscribe Key")},grant:function(a,b){var b=a.callback||b,d=a.error||function(){},e=a.channel||a.channels,f=a.channel_group,g=Ja(),h=a.ttl,i=a.read?"1":"0",j=a.write?"1":"0",k=a.manage?"1":"0",l=a.auth_key||a.auth_keys;if(!b)return Ha("Missing Callback");if(!ea)return Ha("Missing Subscribe Key");if(!da)return Ha("Missing Publish Key");if(!ga)return Ha("Missing Secret Key");var n=Math.floor((new Date).getTime()/1e3),o=ea+"\n"+da+"\ngrant\n",p={w:j,r:i,timestamp:n};a.manage&&(p.m=k),m(e)&&(e=e.join(",")),m(l)&&(l=l.join(",")),"undefined"!=typeof e&&null!=e&&e.length>0&&(p.channel=e),"undefined"!=typeof f&&null!=f&&f.length>0&&(p["channel-group"]=f),"0"!=g&&(p.callback=g),(h||0===h)&&(p.ttl=h),l&&(p.auth=l),p=c(p),l||delete p.auth,o+=w(p);var q=ha(o,ga);q=q.replace(/\+/g,"-"),q=q.replace(/\//g,"_"),p.signature=q,Fa({callback:g,data:p,success:function(a){F(a,b,d)},fail:function(a){G(a,d)},url:[ka,"v1","auth","grant","sub-key",ea]})},mobile_gw_provision:function(a){var b,c,d=a.callback||function(){},e=a.auth_key||fa,f=a.error||function(){},g=Ja(),h=a.channel,i=a.op,j=a.gw_type,k=a.device_id;return k?j?i?h?da?ea?(c=[ka,"v1/push/sub-key",ea,"devices",k],b={uuid:Ma,auth:e,type:j},"add"==i?b.add=h:"remove"==i&&(b.remove=h),Na&&(data.instanceid=Oa),void Fa({callback:g,data:b,success:function(a){F(a,d,f)},fail:function(a){G(a,f)},url:c})):Ha("Missing Subscribe Key"):Ha("Missing Publish Key"):Ha("Missing gw destination Channel (channel)"):Ha("Missing GW Operation (op: add or remove)"):Ha("Missing GW Type (gw_type: gcm or apns)"):Ha("Missing Device ID (device_id)")},audit:function(a,b){var b=a.callback||b,d=a.error||function(){},e=a.channel,f=a.channel_group,g=a.auth_key,h=Ja();if(!b)return Ha("Missing Callback");if(!ea)return Ha("Missing Subscribe Key");if(!da)return Ha("Missing Publish Key");if(!ga)return Ha("Missing Secret Key");var i=Math.floor((new Date).getTime()/1e3),j=ea+"\n"+da+"\naudit\n",k={timestamp:i};"0"!=h&&(k.callback=h),"undefined"!=typeof e&&null!=e&&e.length>0&&(k.channel=e),"undefined"!=typeof f&&null!=f&&f.length>0&&(k["channel-group"]=f),g&&(k.auth=g),k=c(k),g||delete k.auth,j+=w(k);var l=ha(j,ga);l=l.replace(/\+/g,"-"),l=l.replace(/\//g,"_"),k.signature=l,Fa({callback:h,data:k,success:function(a){F(a,b,d)},fail:function(a){G(a,d)},url:[ka,"v1","auth","audit","sub-key",ea]})},revoke:function(a,b){a.read=!1,a.write=!1,Ta.grant(a,b)},set_uuid:function(a){Ma=a,ma()},get_uuid:function(){return Ma},isArray:function(a){return m(a)},get_subscribed_channels:function(){return s(wa,!0)},presence_heartbeat:function(a){var b=a.callback||function(){},d=a.error||function(){},e=Ja(),f={uuid:Ma,auth:fa},g=JSON.stringify(ya);g.length>2&&(f.state=JSON.stringify(ya)),Aa>0&&320>Aa&&(f.heartbeat=Aa),"0"!=e&&(f.callback=e);var h=r(s(wa,!0).join(",")),i=t(xa,!0).join(",");h||(h=","),i&&(f["channel-group"]=i),Na&&(f.instanceid=Oa),Fa({callback:e,data:c(f),url:[ka,"v2","presence","sub-key",ea,"channel",h,"heartbeat"],success:function(a){F(a,b,d)},fail:function(a){G(a,d)}})},stop_timers:function(){clearTimeout(Y),clearTimeout(Z),clearTimeout(za)},shutdown:function(){Ta.stop_timers(),Pa&&Pa()},xdr:Fa,ready:u,db:Ka,uuid:l,map:p,each:o,"each-channel":E,grep:h,offline:function(){
R(1,{message:"Offline. Please check your network settings."})},supplant:i,now:e,unique:a,updater:g};return Ma||(Ma=Ta.uuid()),Oa||(Oa=Ta.uuid()),Ka.set(ea+"uuid",Ma),Y=j(M,P),Z=j(Q,aa),za=j(B,(Ba-3)*P),X(),Ta}function w(){function a(a){return d.SHA256(a).toString(d.enc.Hex)}function b(a){return a=a||{},a.hasOwnProperty("encryptKey")||(a.encryptKey=l.encryptKey),a.hasOwnProperty("keyEncoding")||(a.keyEncoding=l.keyEncoding),a.hasOwnProperty("keyLength")||(a.keyLength=l.keyLength),a.hasOwnProperty("mode")||(a.mode=l.mode),-1==i.indexOf(a.keyEncoding.toLowerCase())&&(a.keyEncoding=l.keyEncoding),-1==j.indexOf(parseInt(a.keyLength,10))&&(a.keyLength=l.keyLength),-1==k.indexOf(a.mode.toLowerCase())&&(a.mode=l.mode),a}function c(a,b){return"base64"==b.keyEncoding?d.enc.Base64.parse(a):"hex"==b.keyEncoding?d.enc.Hex.parse(a):a}function e(b,e){return b=c(b,e),e.encryptKey?d.enc.Utf8.parse(a(b).slice(0,32)):b}function f(a){return"ecb"==a.mode?d.mode.ECB:d.mode.CBC}function g(a){return"cbc"==a.mode?d.enc.Utf8.parse(h):null}var h="0123456789012345",i=["hex","utf8","base64","binary"],j=[128,256],k=["ecb","cbc"],l={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"};return{encrypt:function(a,c,h){if(!c)return a;h=b(h);var i=g(h),j=f(h),k=e(c,h),l=JSON.stringify(a),m=d.AES.encrypt(l,k,{iv:i,mode:j}).ciphertext,n=m.toString(d.enc.Base64);return n||a},decrypt:function(a,c,h){if(!c)return a;h=b(h);var i=g(h),j=f(h),k=e(c,h);try{var l=d.enc.Base64.parse(a),m=d.AES.decrypt({ciphertext:l},k,{iv:i,mode:j}).toString(d.enc.Utf8),n=JSON.parse(m);return n}catch(o){return void 0}}}}function x(a){var b,c=function(){if(!e){e=1,clearTimeout(h);try{response=JSON.parse(b.responseText)}catch(a){return n(1)}l(response)}},d=0,e=0,g=a.timeout||M,h=j(function(){n(1)},g),i=a.data||{},k=a.fail||function(){},l=a.success||function(){},m="undefined"==typeof a.blocking,n=function(a,c){d||(d=1,clearTimeout(h),b&&(b.onerror=b.onload=null,b.abort&&b.abort(),b=null),a&&k(c))};try{b="undefined"!=typeof XDomainRequest&&new XDomainRequest||new XMLHttpRequest,b.onerror=b.onabort=function(){n(1,b.responseText||{error:"Network Connection Error"})},b.onload=b.onloadend=c,b.onreadystatechange=function(){if(4==b.readyState)switch(b.status){case 200:break;default:try{response=JSON.parse(b.responseText),n(1,response)}catch(a){return n(1,{status:b.status,payload:null,message:b.responseText})}return}},i.pnsdk=X,url=f(a.url,i),b.open("GET",url,m),m&&(b.timeout=g),b.send()}catch(o){return n(0),x(a)}return n}function y(a,b,c){o(a.split(","),function(a){var d=function(a){a||(a=window.event),c(a)||(a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())};b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent?b.attachEvent("on"+a,d):b["on"+a]=d})}function z(a){console.error(a)}function A(a,b,c){return c?void a.setAttribute(b,c):a&&a.getAttribute&&a.getAttribute(b)}function B(a){return document.getElementById(a)}function C(a,b){var c=[];return o(a.split(/\s+/),function(a){o((b||document).getElementsByTagName(a),function(a){c.push(a)})}),c}function D(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>0&&"number"==typeof b[c]?"px":"")}catch(d){}}function E(a){return document.createElement(a)}function F(a,b){var c=d.HmacSHA256(a,b);return c.toString(d.enc.Base64)}function G(a){a.db=Y,a.xdr=x,a.error=a.error||z,a.hmac_SHA256=F,a.crypto_obj=w(),a.params={pnsdk:X},SELF=function(a){return G(a)};var b=v(a);for(var c in b)b.hasOwnProperty(c)&&(SELF[c]=b[c]);return SELF.init=SELF,SELF.$=B,SELF.attr=A,SELF.search=C,SELF.bind=y,SELF.css=D,SELF.create=E,SELF.crypto_obj=w(),"undefined"!=typeof window&&y("beforeunload",window,function(){return SELF["each-channel"](function(a){SELF.LEAVE(a.name,1)}),!0}),a.notest?SELF:("undefined"!=typeof window&&y("offline",window,SELF.offline),"undefined"!=typeof document&&y("offline",document,SELF.offline),SELF.ready(),SELF)}var H=1,I=!1,J=[],K="-pnpres",L=10,M=15e3,N=310,O=60,P=1e3,Q="/",R="&",S=5,T=30,U="3.7.22",V=/{([\w\-]+)}/g,W=function(){var a=20,b=Math.floor(Math.random()*a);return function(c,d){return c.indexOf("pubsub.")>0&&c.replace("pubsub","ps"+(d?l().split("-")[0]:++b<a?b:b=1))||c}}(),H=1,X="PubNub-JS-Modern/3.7.22",Y=function(){var a="undefined"!=typeof localStorage&&localStorage;return{get:function(b){try{return a?a.getItem(b):-1==document.cookie.indexOf(b)?null:((document.cookie||"").match(RegExp(b+"=([^;]+)"))||[])[1]||null}catch(c){return}},set:function(b,c){try{if(a)return a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(d){return}}}}();G.init=G,G.secure=G,G.crypto_obj=w(),PUBNUB=G({}),"undefined"!=typeof b&&(b.exports=G)||"undefined"!=typeof c&&(c.PUBNUB=G)||(PUBNUB=G)}(),function(){var a=PUBNUB.ws=function(b,c){if(!(this instanceof a))return new a(b,c);var d=this,b=d.url=b||"",e=(d.protocol=c||"Sec-WebSocket-Protocol",b.split("/")),f={ssl:"wss:"===e[0],origin:e[2],publish_key:e[3],subscribe_key:e[4],channel:e[5]};return d.CONNECTING=0,d.OPEN=1,d.CLOSING=2,d.CLOSED=3,d.CLOSE_NORMAL=1e3,d.CLOSE_GOING_AWAY=1001,d.CLOSE_PROTOCOL_ERROR=1002,d.CLOSE_UNSUPPORTED=1003,d.CLOSE_TOO_LARGE=1004,d.CLOSE_NO_STATUS=1005,d.CLOSE_ABNORMAL=1006,d.onclose=d.onerror=d.onmessage=d.onopen=d.onsend=function(){},d.binaryType="",d.extensions="",d.bufferedAmount=0,d.trasnmitting=!1,d.buffer=[],d.readyState=d.CONNECTING,b?(d.pubnub=PUBNUB.init(f),d.pubnub.setup=f,d.setup=f,void d.pubnub.subscribe({restore:!1,channel:f.channel,disconnect:d.onerror,reconnect:d.onopen,error:function(){d.onclose({code:d.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!1})},callback:function(a){d.onmessage({data:a})},connect:function(){d.readyState=d.OPEN,d.onopen()}})):(d.readyState=d.CLOSED,d.onclose({code:d.CLOSE_ABNORMAL,reason:"Missing URL",wasClean:!0}),d)};a.prototype.send=function(a){var b=this;b.pubnub.publish({channel:b.pubnub.setup.channel,message:a,callback:function(a){b.onsend({data:a})}})},a.prototype.close=function(){var a=this;a.pubnub.unsubscribe({channel:a.pubnub.setup.channel}),a.readyState=a.CLOSED,a.onclose({})}}();var d=d||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){for(var b=d,c=b.lib,e=c.WordArray,f=c.Hasher,c=b.algo,g=[],h=[],i=function(a){return 4294967296*(a-(0|a))|0},j=2,k=0;64>k;){var l;a:{l=j;for(var m=a.sqrt(l),n=2;m>=n;n++)if(!(l%n)){l=!1;break a}l=!0}l&&(8>k&&(g[k]=i(a.pow(j,.5))),h[k]=i(a.pow(j,1/3)),k++),j++}var o=[],c=c.SHA256=f.extend({_doReset:function(){this._hash=new e.init(g.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)o[m]=0|a[b+m];else{var n=o[m-15],p=o[m-2];o[m]=((n<<25|n>>>7)^(n<<14|n>>>18)^n>>>3)+o[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+o[m-16]}n=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+h[m]+o[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=g+n|0,g=f,f=e,e=d,d=n+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+g|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=f.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=f._createHelper(c),b.HmacSHA256=f._createHmacHelper(c)}(Math),function(){var a=d,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,c){a=this._hasher=new a.init,"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c)),c.clamp();for(var f=this._oKey=c.clone(),g=this._iKey=c.clone(),h=f.words,i=g.words,j=0;d>j;j++)h[j]^=1549556828,i[j]^=909522486;f.sigBytes=g.sigBytes=e,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher;return a=b.finalize(a),b.reset(),b.finalize(this._oKey.clone().concat(a))}})}(),function(){var a=d,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function f(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var g=d,h=g.lib,i=h.WordArray,j=h.Hasher,h=g.algo,k=[],l=0;64>l;l++)k[l]=4294967296*a.abs(a.sin(l+1))|0;h=h.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,d){for(var g=0;16>g;g++){var h=d+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[d+0],i=a[d+1],j=a[d+2],l=a[d+3],m=a[d+4],n=a[d+5],o=a[d+6],p=a[d+7],q=a[d+8],r=a[d+9],s=a[d+10],t=a[d+11],u=a[d+12],v=a[d+13],w=a[d+14],x=a[d+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,k[0]),B=b(B,y,z,A,i,12,k[1]),A=b(A,B,y,z,j,17,k[2]),z=b(z,A,B,y,l,22,k[3]),y=b(y,z,A,B,m,7,k[4]),B=b(B,y,z,A,n,12,k[5]),A=b(A,B,y,z,o,17,k[6]),z=b(z,A,B,y,p,22,k[7]),y=b(y,z,A,B,q,7,k[8]),B=b(B,y,z,A,r,12,k[9]),A=b(A,B,y,z,s,17,k[10]),z=b(z,A,B,y,t,22,k[11]),y=b(y,z,A,B,u,7,k[12]),B=b(B,y,z,A,v,12,k[13]),A=b(A,B,y,z,w,17,k[14]),z=b(z,A,B,y,x,22,k[15]),y=c(y,z,A,B,i,5,k[16]),B=c(B,y,z,A,o,9,k[17]),A=c(A,B,y,z,t,14,k[18]),z=c(z,A,B,y,h,20,k[19]),y=c(y,z,A,B,n,5,k[20]),B=c(B,y,z,A,s,9,k[21]),A=c(A,B,y,z,x,14,k[22]),z=c(z,A,B,y,m,20,k[23]),y=c(y,z,A,B,r,5,k[24]),B=c(B,y,z,A,w,9,k[25]),A=c(A,B,y,z,l,14,k[26]),z=c(z,A,B,y,q,20,k[27]),y=c(y,z,A,B,v,5,k[28]),B=c(B,y,z,A,j,9,k[29]),A=c(A,B,y,z,p,14,k[30]),z=c(z,A,B,y,u,20,k[31]),y=e(y,z,A,B,n,4,k[32]),B=e(B,y,z,A,q,11,k[33]),A=e(A,B,y,z,t,16,k[34]),z=e(z,A,B,y,w,23,k[35]),y=e(y,z,A,B,i,4,k[36]),B=e(B,y,z,A,m,11,k[37]),A=e(A,B,y,z,p,16,k[38]),z=e(z,A,B,y,s,23,k[39]),y=e(y,z,A,B,v,4,k[40]),B=e(B,y,z,A,h,11,k[41]),A=e(A,B,y,z,l,16,k[42]),z=e(z,A,B,y,o,23,k[43]),y=e(y,z,A,B,r,4,k[44]),B=e(B,y,z,A,u,11,k[45]),A=e(A,B,y,z,x,16,k[46]),z=e(z,A,B,y,j,23,k[47]),y=f(y,z,A,B,h,6,k[48]),B=f(B,y,z,A,p,10,k[49]),A=f(A,B,y,z,w,15,k[50]),z=f(z,A,B,y,n,21,k[51]),y=f(y,z,A,B,u,6,k[52]),B=f(B,y,z,A,l,10,k[53]),A=f(A,B,y,z,s,15,k[54]),z=f(z,A,B,y,i,21,k[55]),y=f(y,z,A,B,q,6,k[56]),B=f(B,y,z,A,x,10,k[57]),A=f(A,B,y,z,o,15,k[58]),z=f(z,A,B,y,v,21,k[59]),y=f(y,z,A,B,m,6,k[60]),B=f(B,y,z,A,t,10,k[61]),A=f(A,B,y,z,j,15,k[62]),z=f(z,A,B,y,r,21,k[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}}),g.MD5=j._createHelper(h),g.HmacMD5=j._createHmacHelper(h)}(Math),function(){var a=d,b=a.lib,c=b.Base,e=b.WordArray,b=a.algo,f=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,d=c.hasher.create(),f=e.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&d.update(i);var i=d.update(a).finalize(b);d.reset();for(var j=1;c>j;j++)i=d.finalize(i),d.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return f.create(c).compute(a,b)}}(),d.lib.Cipher||function(a){var b=d,c=b.lib,e=c.Base,f=c.WordArray,g=c.BufferedBlockAlgorithm,h=b.enc.Base64,i=b.algo.EvpKDF,j=c.Cipher=g.extend({cfg:e.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?p:o).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?p:o).decrypt(a,b,c,d)}}}});c.StreamCipher=j.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var k=b.mode={},l=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},m=(c.BlockCipherMode=e.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();m.Encryptor=m.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;l.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),m.Decryptor=m.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),l.call(this,a,b,d),this._prevBlock=e}}),k=k.CBC=m,m=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,e=[],g=0;c>g;g+=4)e.push(d);c=f.create(e,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=j.extend({cfg:j.cfg.extend({mode:k,padding:m}),reset:function(){j.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=c.CipherParams=e.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),k=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?f.create([1398893684,1701076831]).concat(a).concat(b):b).toString(h)},parse:function(a){a=h.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=f.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},o=c.SerializableCipher=e.extend({cfg:e.extend({format:k}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,n.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=f.random(8)),a=i.create({keySize:b+c}).compute(a,d),c=f.create(a.words.slice(b),4*c),a.sigBytes=4*b,n.create({key:a,iv:c,salt:d})}},p=c.PasswordBasedCipher=o.extend({cfg:o.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=o.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,o.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=d,b=a.lib.BlockCipher,c=a.algo,e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=0;256>p;p++)o[p]=128>p?p<<1:p<<1^283;for(var q=0,r=0,p=0;256>p;p++){var s=r^r<<1^r<<2^r<<3^r<<4,s=s>>>8^255&s^99;e[q]=s,f[s]=q;var t=o[q],u=o[t],v=o[u],w=257*o[s]^16843008*s;g[q]=w<<24|w>>>8,h[q]=w<<16|w>>>16,i[q]=w<<8|w>>>24,j[q]=w,w=16843009*v^65537*u^257*t^16843008*q,k[s]=w<<24|w>>>8,l[s]=w<<16|w>>>16,m[s]=w<<8|w>>>24,n[s]=w,q?(q=t^o[o[o[v^t]]],r^=o[o[r]]):q=r=1}var x=[0,1,2,4,8,16,32,64,128,27,54],c=c.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),d=this._keySchedule=[],f=0;a>f;f++)if(c>f)d[f]=b[f];else{var g=d[f-1];f%c?c>6&&4==f%c&&(g=e[g>>>24]<<24|e[g>>>16&255]<<16|e[g>>>8&255]<<8|e[255&g]):(g=g<<8|g>>>24,g=e[g>>>24]<<24|e[g>>>16&255]<<16|e[g>>>8&255]<<8|e[255&g],g^=x[f/c|0]<<24),d[f]=d[f-c]^g}for(b=this._invKeySchedule=[],c=0;a>c;c++)f=a-c,g=c%4?d[f]:d[f-4],b[c]=4>c||4>=f?g:k[e[g>>>24]]^l[e[g>>>16&255]]^m[e[g>>>8&255]]^n[e[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,g,h,i,j,e)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,k,l,m,n,f),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(c)}(),d.mode.ECB=function(){var a=d.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(a,b){this._cipher.encryptBlock(a,b)}}),a.Decryptor=a.extend({processBlock:function(a,b){this._cipher.decryptBlock(a,b)}}),a}()},{}],8:[function(a,b,c){function d(){function a(a,b,c){return e.sendToApp(a,b,c)}function b(a){var b=f.addHandler(a);return g||(e.watchForData(f.dataReceiver),g=!0),b}function c(a){f.removeHandler(a)}var d=this,g=!1;d.sendToApp=a,d.watchForData=b,d.clearWatchForData=c}var e=a("./communication"),f=a("./services/data-watcher-service");b.exports=new d},{"./communication":9,"./services/data-watcher-service":11}],9:[function(a,b,c){function d(){function a(a,b,c){e.publish({channel:g(a),message:{senderID:i,data:c}})}function b(a){return j=a,++l}function c(a){if(a!==l)throw new Error('No handler with id "'+a+'" exists.');j=null}function d(a){return j?void j(a):void console.log("Received a message, but no handlers are subscribed.",a)}function g(a){var b=f.get();return b.id+"|"+a}function h(a,b){console.log(a,b)}var i,j,k=this,l=0;k.sendToApp=a,k.watchForData=b,k.clearWatchForData=c,function(){if(i=window.ngiAppId,!i)throw new Error('Failed to initialize the communication service. You must specify this app\'s ID at "window.ngiAppId".');e.subscribe({channel:g(i),message:d,connect:h.bind(null,"Communication Service Connected"),disconnect:h.bind(null,"Communication Service Disconnected"),reconnect:h.bind(null,"Communication Service Reconnected"),error:h.bind(null,"Communication Service Error")})}()}var e=a("./services/pubsub-service"),f=a("./providers/local-environment-provider");b.exports=new d},{"./providers/local-environment-provider":10,"./services/pubsub-service":12}],10:[function(a,b,c){function d(){function a(){var a=f.getItem(d);if(!a){a={id:e.uuid()};try{b(a)}catch(c){console.error("An error occurred while setting the environment info.",c)}return a}return JSON.parse(a)}function b(a){var b=JSON.stringify(a);f.setItem(d,b)}var c=this,d="mockgm.environment.id";c.get=a}var e=a("../services/pubsub-service"),f=window.localStorage||new(a("node-localstorage").LocalStorage)("./localstorage");b.exports=new d},{"../services/pubsub-service":12,"node-localstorage":6}],11:[function(a,b,c){function d(){function a(a){if(!a||"function"!=typeof a)throw new Error('Invalid parameter -- "callback" must be a function.');var b=++e;return f[b]=a,b}function b(a){if(!a||"number"!=typeof a)throw new Error('Invalid parameter -- "handle" must be a valid callback handle.');if(!f[a])throw new Error('No handler with id "'+a+'" exists.');delete f[a]}function c(a){for(var b in f){var c=f[b];try{c(a)}catch(d){console.error("An unhandled error occurred in watchForData handler "+b+".",d)}}}var d=this,e=0,f={};d.addHandler=a,d.removeHandler=b,d.dataReceiver=c}b.exports=new d},{}],12:[function(a,b,c){function d(){function a(a){return d.subscribe(a)}function b(a){return a.publish_key=f,d.publish(a)}function c(){return d.uuid()}var d,h=this;h.subscribe=a,h.publish=b,h.uuid=c,function(){d=e({publish_key:f,subscribe_key:g})}()}var e=a("pubnub"),f="pub-c-ce05588f-4a03-446c-aacc-159f8a18b3d3",g="sub-c-a898c26a-c62f-11e5-a316-0619f8945a4f";b.exports=new d},{pubnub:7}]},{},[1])(1)});